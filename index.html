<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Ù…Ø±Ø­Ù„Ù‡ Û² â€” Ø¢Ø²Ù…Ø§ÛŒØ´ ØªØ¹Ø§Ù…Ù„ÛŒ</title>
<style>
  :root{
    --bg1:#061229; /* deep navy */
    --bg2:#07182a;
    --panel:#0d2130;
    --card:#0f2a36;
    --accent:#8be0ff;   /* cyan-ish */
    --accent-2:#ffd36b; /* warm highlight */
    --good:#5fe08b;
    --bad:#ff7b7b;
    --glass: rgba(255,255,255,0.03);
    --math-blue:#6fb3ff;
    --math-purple:#9b8cff;
  }
  *{box-sizing:border-box}
  body{
    margin:0; padding:26px; font-family: Vazirmatn, "Segoe UI", Roboto, "Helvetica Neue", Arial, system-ui;
    background: linear-gradient(180deg,var(--bg1),var(--bg2));
    color:#e6f7fb; text-align:center; min-height:100vh;
  }
  h1{ margin:6px 0 8px; font-size:22px; letter-spacing:0.6px; color:var(--math-blue); }
  .subtitle{ color:#bfeeff66; margin-bottom:12px; font-size:14px; }

  /* header row: small status */
  .top-row{ display:flex; gap:14px; justify-content:center; align-items:center; flex-wrap:wrap; margin-bottom:12px; }
  #statusBox{ background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(0,0,0,0.04)); padding:8px 12px; border-radius:10px; font-weight:800; color:var(--accent); border:1px solid rgba(139,224,255,0.06); }

  /* board layout */
  .board{ display:flex; gap:18px; justify-content:center; align-items:flex-start; flex-wrap:wrap; margin-top:6px; padding:8px; }

  .set-box{
    width:300px; min-height:150px; padding:14px; border-radius:12px; background:linear-gradient(180deg, rgba(255,255,255,0.015), rgba(0,0,0,0.06));
    border:1px solid rgba(255,255,255,0.035); position:relative; box-shadow:0 10px 30px rgba(3,10,20,0.6);
    transition:transform .22s cubic-bezier(.2,.9,.2,1), box-shadow .22s ease;
  }
  .set-box.highlight{ transform:translateY(-6px) scale(1.01); box-shadow:0 20px 48px rgba(43,120,200,0.06); }
  .set-title{ font-weight:900; font-size:18px; margin-bottom:6px; color:var(--math-purple); display:flex; justify-content:space-between; align-items:center; }
  .set-rule{ font-size:13px; color:#bfeaff; opacity:0.95; margin-bottom:8px; }
  .set-contents{ min-height:76px; display:flex; gap:8px; flex-wrap:wrap; align-items:flex-start; padding:6px; border-radius:8px; background:linear-gradient(180deg, rgba(0,0,0,0.02), rgba(255,255,255,0.01)); }

  .set-braces{ font-weight:900; color:var(--accent-2); font-size:13px; background:linear-gradient(90deg, rgba(255,211,120,0.06), rgba(139,224,255,0.02)); padding:4px 8px; border-radius:8px; min-width:72px; text-align:left; }

  /* tray and cards */
  .tray-area{ width:100%; margin-top:16px; display:flex; justify-content:center; }
  .cards{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; max-width:980px; }
  .card{
    background:linear-gradient(180deg, rgba(255,255,255,0.012), rgba(0,0,0,0.06)); padding:12px 16px; border-radius:28px; cursor:grab; user-select:none;
    border:1px solid rgba(255,255,255,0.03); box-shadow:0 8px 22px rgba(0,0,0,0.5);
    font-size:20px; min-width:54px; text-align:center; transition:transform .12s ease, box-shadow .12s ease;
    color:#e9fbff; font-weight:900;
  }
  .card:active{ cursor:grabbing; transform:scale(.98); }
  .card.ghost{ opacity:.45; transform:scale(.96); }

  /* placed */
  .placed{ background: rgba(255,255,255,0.02); border-radius:10px; padding:8px 10px; display:inline-block; margin:6px 6px 0 0; cursor:grab; font-weight:800; color:#efffff; border:1px solid rgba(139,224,255,0.04); }
  .placed.dragging{ opacity:.5; }

  /* poof effect */
  .poof{ position:absolute; width:26px; height:26px; border-radius:100%; pointer-events:none; transform:scale(0); opacity:0; transition:all .36s ease; }

  /* toss animation (wrong) */
  .toss-anim{ animation: toss 520ms cubic-bezier(.2,.9,.2,1); }
  @keyframes toss{
    0%{ transform: translateY(0) rotate(0) scale(1); opacity:1 }
    40%{ transform: translateY(-26px) rotate(-12deg) scale(1.02); opacity:1 }
    100%{ transform: translateY(160px) rotate(24deg) scale(.6); opacity:0 }
  }

  @keyframes shakeX{ 0%{transform:none}25%{transform:translateX(-6px)}50%{transform:translateX(6px)}75%{transform:translateX(-6px)}100%{transform:none} }
  .shake{ animation:shakeX .36s; }

  /* welcome modal (kept, slightly restyled) */
  #welcome{
    position:fixed; inset:0; display:flex; justify-content:center; align-items:center; z-index:9998;
    background: linear-gradient(180deg, rgba(0,0,0,0.6), rgba(0,0,0,0.55));
  }
  .welcome-card{ background:linear-gradient(180deg,#07142a,#041022); padding:22px 26px; border-radius:12px; text-align:center; width:92%; max-width:640px; box-shadow:0 20px 60px rgba(0,0,0,0.7); color:#e7fbff; border:1px solid rgba(255,255,255,0.04); }
  .welcome-key{ font-size:44px; margin-bottom:8px; transform:rotate(-6deg); display:inline-block; }
  .welcome-title{ font-weight:900; font-size:20px; margin-bottom:6px; color:var(--math-blue); }
  .welcome-text{ color:#cfeeff; opacity:0.96; margin-bottom:12px; font-size:14px; line-height:1.4; }
  .btn{ display:inline-block; padding:10px 16px; border-radius:12px; font-weight:800; cursor:pointer; border:none; margin:6px; }
  .btn.start{ background:linear-gradient(90deg,var(--math-blue),var(--math-purple)); color:#042032; box-shadow:0 10px 30px rgba(111,179,255,0.08); }
  .btn.later{ background:transparent; color:#9feef8; border:1px solid rgba(159,238,248,0.10); }

  /* helper text */
  .muted{ color:#9beff6cc; font-size:13px; }
  footer{ display:none } /* removed footer as requested */
</style>
</head>
<body>
  <div id="welcome" aria-hidden="false">
    <div class="welcome-card" role="dialog" aria-modal="true">
      <div class="welcome-key">ğŸ—ï¸</div>
      <div class="welcome-title">Ø¨Ù‡ Ù…Ø±Ø­Ù„Ù‡Ù” Ø¯ÙˆÙ… Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒ</div>
      <div class="welcome-text">Ø¯Ø± Ø§ÛŒÙ† Ù‚Ø³Ù…Øª Ù…Ù…Ú©Ù† Ø§Ø³Øª ÛŒÚ© Ú©Ø§Ø±Øª Ø±Ø§ Ú†Ù†Ø¯ Ø¨Ø§Ø± Ø¨Ø¨ÛŒÙ†ÛŒ â€” ÛŒØ¹Ù†ÛŒ ÛŒÚ© Ø¹Ø¯Ø¯ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ Ú†Ù†Ø¯ Ø¬Ø§ÛŒÚ¯Ø§Ù‡ Ù…Ø¹ØªØ¨Ø± ØªØ¹Ù„Ù‚ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯. Ú©Ø§Ø±Øª Ø±Ø§ Ø¨Ú©Ø´ Ùˆ Ø¯Ø± Ù‡Ø±Ø®Ø§Ù†Ù‡â€ŒØ§ÛŒ Ú©Ù‡ ÙˆÛŒÚ˜Ú¯ÛŒÙ Ø¹Ø¯Ø¯ Ø¨Ø±Ù‚Ø±Ø§Ø± Ø§Ø³Øª Ø±Ù‡Ø§ Ú©Ù†. Ø¨Ø§Ø²ÛŒ ØªØ¬Ø±Ø¨Ù‡â€ŒÙ…Ø­ÙˆØ± Ø§Ø³ØªØ› Ù†Ú¯Ø±Ø§Ù† Ù¾ÛŒØºØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø®Ø·Ø§ÛŒ Ø³Ø®Øª Ù†Ø¨Ø§Ø´.</div>
      <div style="margin-bottom:6px;" class="muted">Ù‚ÙˆØ§Ø¹Ø¯ Ù‡Ø± Ø¨Ø§Ú©Ø³ Ø¯Ø± Ù‡Ù…Ø§Ù† Ø¨Ø§Ú©Ø³ Ù†ÙˆØ´ØªÙ‡ Ø´Ø¯Ù‡ â€” Ø§Ø² Ø¨Ø§Ù„Ø§ÛŒ ØµÙØ­Ù‡ Ø¨Ø±Ø¯Ø§Ø´ØªÙ‡ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ ØªØ§ ØµÙØ­Ù‡ ØªÙ…ÛŒØ²ØªØ± Ùˆ ØªÙ…Ø±Ú©Ø²ÛŒâ€ŒØªØ± Ø¨Ø§Ø´Ø¯.</div>
      <div>
        <button class="btn start" id="btnStart">Ø´Ø±ÙˆØ¹ Ú©Ù†</button>
        <button class="btn later" id="btnLater">Ø¨Ø¹Ø¯Ø§Ù‹</button>
      </div>
    </div>
  </div>

  <h1>Ù…Ø±Ø­Ù„Ù‡ Û² â€” Ø¢Ø²Ù…Ø§ÛŒØ´ ØªØ¹Ø§Ù…Ù„ÛŒ</h1>
  <div class="subtitle">Ú©Ø§Ø±Øªâ€ŒÙ‡Ø§ Ø±Ø§ Ø¨Ú©Ø´ Ùˆ Ø¯Ø± Ù‡Ø± Ø¨Ø§Ú©Ø³ Ú©Ù‡ ÙˆÛŒÚ˜Ú¯ÛŒÙ Ø¹Ø¯Ø¯ Ø¨Ø±Ù‚Ø±Ø§Ø± Ø§Ø³Øª Ø±Ù‡Ø§ Ú©Ù† â€” Ø§Ú¯Ø± Ø¹Ø¯Ø¯ Ú†Ù†Ø¯ ÙˆÛŒÚ˜Ú¯ÛŒ Ø¯Ø§Ø´ØªØŒ Ø¯Ø± Ù‡Ø± Ú©Ø¯Ø§Ù… Ø¨ÛŒÙ†Ø¯Ø§Ø².</div>

  <div class="top-row">
    <div id="statusBox">ÙˆØ¶Ø¹ÛŒØª: <span id="statusText">Ø¢Ù…Ø§Ø¯Ù‡</span></div>
  </div>

  <div class="board" aria-live="polite">
    <div class="set-box" data-set="A" id="setA">
      <div class="set-title">
        A
        <span class="set-braces">{ }</span
